<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokemon Battle DS</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
    <script type="module" src="pokemon.mjs"></script>
    <script type="module" src="pullPokemon.mjs"></script>
</head>
<body>
    <!-- ===== HEADER ===== -->
    <header id="game-header">
        <h1 class="game-title">POKEMON BATTLE</h1>
        <div class="coin-display">
            <span id="coin-counter"></span>
        </div>
    </header>

    <!-- ===== MAIN CONTAINER ===== -->
    <main class="main-container">
        
        <!-- ===== PAGE: MENU ===== -->
        <section id="page-menu" class="page">
            <div class="ds-frame">
                <div class="ds-screen">
                    <h2 class="menu-title">POKEMON<br>BATTLE DS</h2>
                    <p class="menu-subtitle">SIMULATORE DI BATTAGLIE</p>
                    
                    <div class="pokeball-decoration"></div>
                    
                    <div class="menu-buttons">
                        <button class="btn-ds btn-blue" onclick="showPage('page-inventory')">
                            INVENTARIO
                        </button>
                        <button class="btn-ds btn-yellow" onclick="showPage('page-shop')">
                            NEGOZIO
                        </button>
                        <button class="btn-ds btn-red" onclick="showPage('page-battle')">
                            BATTAGLIA!
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- ===== PAGE: INVENTORY ===== -->
        <section id="page-inventory" class="page hidden">
            <div class="ds-frame">
                <div class="ds-screen">
                    <h2 class="section-title">INVENTARIO</h2>
                    
                    <!-- Active Team Section -->
                    <div class="active-team-section">
                        <h3 class="active-team-title">TEAM ATTIVO</h3>
                        <div id="active-team">
                            <div class="team-slot" data-slot="0">
                                <span>SLOT 1</span>
                                <span>VUOTO</span>
                            </div>
                            <div class="team-slot" data-slot="1">
                                <span>SLOT 2</span>
                                <span>VUOTO</span>
                            </div>
                            <div class="team-slot" data-slot="2">
                                <span>SLOT 3</span>
                                <span>VUOTO</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pokemon Grid -->
                    <div id="pokemon-grid">
                        <div id="empty-message" class="empty-message">
                            Nessun Pokemon!<br><br>
                            Vai al negozio per<br>acquistare pacchetti!
                        </div>
                    </div>
                    
                    
                    
                    <div class="page-footer">
                        <button class="btn-ds btn-gray" onclick="showPage('page-menu')">
                            TORNA AL MENU
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- ===== PAGE: SHOP ===== -->
        <section id="page-shop" class="page hidden">
            <div class="ds-frame">
                <div class="ds-screen">
                    <h2 class="section-title">NEGOZIO</h2>
                    
                    <div class="shop-coins">
                        Monete disponibili: <span id="shop-coin-display"></span>
                    </div>
                    
                    <div class="packs-container">
                        <!-- Pacchetto Base -->
                        <div class="pack pack-base" onclick="buyPack('base')">
                            <div class="pack-image"></div>
                            <h3 class="pack-title">PACCHETTO BASE</h3>
                            <p class="pack-desc">1 Pokemon comune</p>
                            <span class="pack-price">250</span>
                        </div>
                        
                        <!-- Pacchetto Leggendario -->
                        <div class="pack pack-legendary" onclick="buyPack('legendary')">
                            <div class="pack-image"></div>
                            <h3 class="pack-title">PACCHETTO LEGGENDARIO</h3>
                            <p class="pack-desc">1 Pokemon leggendario garantito!</p>
                            <span class="pack-price">2000</span>
                        </div> 

                        <!-- Pacchetto Starter -->
                        <div class="pack pack-starter" onclick="buyPack('starter')">
                            <div class="pack-image"></div>
                            <h3 class="pack-title">PACCHETTO STARTER</h3>
                            <p class="pack-desc">5 Pokemon di alto livello</p>
                            <span class="pack-price">1200</span>
                        </div>
                    </div>
                    
                    <div class="page-footer">
                        <button class="btn-ds btn-gray" onclick="showPage('page-menu')">
                            TORNA AL MENU
                        </button>
                        <button class="btn-ds btn-gold" onclick="showPage('page-compramonete')">
                            COMPRA MONETE!
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- ===== PAGE: COMPRAMONETE ===== -->
        <section id="page-compramonete" class="page hidden">
            <div class="ds-frame">
                <div class="ds-screen compra-monete-screen">
                    <h2 class="section-title gambling-title">COMPRA MONETE ORA!</h2>
                    
                    <div class="promo-banner">
                        <p class="promo-text">OFFERTA LIMITATA! NON PERDERE QUESTA OCCASIONE!</p>
                        <p class="promo-subtext">I TUOI AMICI STANNO GIA' VINCENDO!</p>
                    </div>
                    
                    <div class="shop-coins gambling-coins">
                        Le tue monete: <span id="compra-coin-display" class="coin-highlight">0</span>
                        <p class="coin-warning">NON ABBASTANZA? COMPRA ORA!</p>
                    </div>
                    
                    <div class="coin-packs-container">
                        <!-- Pacchetto Piccolo -->
                        <div class="coin-pack pack-small" onclick="buyCoins('small')">
                            <div class="pack-glow"></div>
                            <div class="coin-pack-image">
                                <span class="coin-icon">ðŸ’°</span>
                            </div>
                            <h3 class="coin-pack-title">STARTER</h3>
                            <p class="coin-amount">500 MONETE</p>
                            <p class="coin-pack-desc">Inizia a vincere!</p>
                            <span class="coin-pack-price">â‚¬2.99</span>
                            <button class="btn-buy btn-buy-small" onclick="buyCoins('small'); event.stopPropagation();">COMPRA SUBITO!</button>
                        </div>
                        
                        <!-- Pacchetto Medio - BEST VALUE -->
                        <div class="coin-pack pack-medium best-value" onclick="buyCoins('medium')">
                            <div class="best-value-badge">MIGLIORE AFFARE!</div>
                            <div class="pack-glow pack-glow-intense"></div>
                            <div class="coin-pack-image">
                                <span class="coin-icon coin-icon-big">ðŸ’°ðŸ’°</span>
                            </div>
                            <h3 class="coin-pack-title">POPOLARE</h3>
                            <p class="coin-amount">1500 MONETE</p>
                            <p class="coin-bonus">+300 BONUS!</p>
                            <p class="coin-pack-desc">Il preferito dai giocatori!</p>
                            <span class="coin-pack-price">â‚¬7.99</span>
                            <span class="coin-pack-old-price">â‚¬9.99</span>
                            <button class="btn-buy btn-buy-medium" onclick="buyCoins('medium'); event.stopPropagation();">APPROFITTA ORA!</button>
                        </div>
                        
                        <!-- Pacchetto Grande -->
                        <div class="coin-pack pack-large" onclick="buyCoins('large')">
                            <div class="pack-glow pack-glow-gold"></div>
                            <div class="coin-pack-image">
                                <span class="coin-icon coin-icon-huge">ðŸ’°ðŸ’°ðŸ’°</span>
                            </div>
                            <h3 class="coin-pack-title gold-text">MEGA PACK</h3>
                            <p class="coin-amount gold-text">3500 MONETE</p>
                            <p class="coin-bonus gold-bonus">+1000 BONUS!</p>
                            <p class="coin-pack-desc">Per i veri campioni!</p>
                            <span class="coin-pack-price">â‚¬14.99</span>
                            <span class="coin-pack-old-price">â‚¬19.99</span>
                            <button class="btn-buy btn-buy-large" onclick="buyCoins('large'); event.stopPropagation();">DIVENTA LEGGENDA!</button>
                        </div>
                        
                        <!-- Pacchetto SUPREMO -->
                        <div class="coin-pack pack-supreme" onclick="buyCoins('supreme')">
                            <div class="supreme-badge">OFFERTA ESCLUSIVA!</div>
                            <div class="pack-glow pack-glow-rainbow"></div>
                            <div class="coin-pack-image">
                                <span class="coin-icon coin-icon-rainbow">ðŸ’ŽðŸ’°ðŸ’Ž</span>
                            </div>
                            <h3 class="coin-pack-title supreme-text">SUPREMO</h3>
                            <p class="coin-amount supreme-text">10000 MONETE</p>
                            <p class="coin-bonus supreme-bonus">+3000 BONUS!</p>
                            <p class="coin-pack-desc supreme-desc">DIVENTA IMBATTIBILE!</p>
                            <span class="coin-pack-price supreme-price">â‚¬39.99</span>
                            <span class="coin-pack-old-price">â‚¬59.99</span>
                            <button class="btn-buy btn-buy-supreme" onclick="buyCoins('supreme'); event.stopPropagation();">ACQUISTA E DOMINA!</button>
                        </div>
                    </div>
                    
                    <div class="urgency-section">
                        <p class="urgency-text blink">âš¡ SOLO PER OGGI! âš¡</p>
                        <p class="urgency-subtext">Migliaia di giocatori hanno giÃ  approfittato di questa offerta!</p>
                    </div>
                    
                    <div class="testimonials">
                        <p class="testimonial">"Ho comprato il pack SUPREMO e ora vinco sempre!" - Marco, 14 anni</p>
                        <p class="testimonial">"Non posso smettere di giocare, grazie!" - Luca, 12 anni</p>
                    </div>
                    
                    <div class="page-footer">
                        <button class="btn-ds btn-gray" onclick="showPage('page-shop')">
                            Torna al negozio
                        </button>
                        <button class="btn-ds btn-gold btn-gold-pulse" onclick="buyCoins('medium')">
                            COMPRA IL PIÃ™ VENDUTO!
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- ===== PAGE: BATTLE ===== -->
        <section id="page-battle" class="page hidden">
            <div class="ds-frame">
                <!-- Top Screen - Battle Arena -->
                <div id="battle-screen-top">
                    <div class="battle-bg-element"></div>
                    
                    <!-- Enemy Pokemon -->
                    <div id="enemy-pokemon" class="battle-pokemon enemy">
                        <img src="" alt="Enemy Pokemon" id="enemy-sprite">
                        <div class="pokemon-info-battle">
                            <p class="pokemon-battle-name" id="enemy-name">???</p>
                            <div class="hp-bar-container">
                                <div class="hp-bar" id="enemy-hp-bar" style="width: 100%;"></div>
                            </div>
                            <p class="hp-text"><span id="enemy-hp-current">???</span> / <span id="enemy-hp-max">???</span></p>
                        </div>
                    </div>
                    
                    <!-- Player Pokemon -->
                    <div id="player-pokemon" class="battle-pokemon player">
                        <img src="" alt="Player Pokemon" id="player-sprite">
                        <div class="pokemon-info-battle">
                            <p class="pokemon-battle-name" id="player-name">???</p>
                            <div class="hp-bar-container">
                                <div class="hp-bar" id="player-hp-bar" style="width: 100%;"></div>
                            </div>
                            <p class="hp-text"><span id="player-hp-current">???</span> / <span id="player-hp-max">???</span></p>
                        </div>
                    </div>
                </div>
                
                <!-- DS Hinge -->
                <div class="ds-hinge">
                    <div class="hinge-line"></div>
                </div>
                
                <!-- Bottom Screen - Controls -->
                <div id="battle-screen-bottom">
                    <!-- Battle Log -->
                    <div id="battle-log">
                        <p>Seleziona un Pokemon e inizia la battaglia!</p>
                    </div>
                    
                    <!-- Moves Grid -->
                    <div class="moves-grid">
                        <button class="move-btn type-normal" onclick="useMove(0)" id="move-0" disabled>
                            MOSSA 1
                        </button>
                        <button class="move-btn type-normal" onclick="useMove(1)" id="move-1" disabled>
                            MOSSA 2
                        </button>
                        <button class="move-btn type-normal" onclick="useMove(2)" id="move-2" disabled>
                            MOSSA 3
                        </button>
                        <button class="move-btn type-normal" onclick="useMove(3)" id="move-3" disabled>
                            MOSSA 4
                        </button>
                    </div>
                    
                    <!-- Battle Actions -->
                    <div class="battle-actions">
                        <button class="btn-ds btn-yellow" onclick="switchPokemon()">
                            CAMBIA
                        </button>
                    </div>
                </div>
                
                <div class="page-footer">
                    <button class="btn-ds btn-gray btn-small" onclick="showPage('page-menu')">
                        TORNA AL MENU
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- ===== PACK REVEAL MODAL ===== -->
    <div id="pack-reveal" class="hidden">
        <div class="reveal-animation">
            <div id="reveal-content">
                <!-- Revealed Pokemon will be shown here -->
            </div>
        </div>
        <button class="btn-ds btn-green" onclick="closePackReveal()" style="margin-top: 20px;">
            CONTINUA
        </button>
    </div>

    <!-- ===== VICTORY BANNER ===== -->
    <div id="victory-banner" class="hidden">
        <div class="victory-content">
            <h2 class="victory-title">HAI VINTO!</h2>
            <p class="victory-coins">+100</p>
            <button class="btn-ds btn-green" onclick="closeVictoryBanner()">
                CONTINUA
            </button>
        </div>
    </div>

    <!-- ===== DEFEAT BANNER ===== -->
    <div id="defeat-banner" class="hidden">
        <div class="defeat-content">
            <h2 class="defeat-title">HAI PERSO...</h2>
            <p style="color: #aaa; font-size: 10px; margin-bottom: 20px;">Ritenta la prossima volta!</p>
            <button class="btn-ds btn-gray" onclick="closeDefeatBanner()">
                CONTINUA
            </button>
        </div>
    </div>

    <!-- ===== SWITCH POKEMON MODAL ===== -->
    <div id="switch-modal" class="hidden">
        <h3 class="switch-title">SCEGLI UN POKEMON</h3>
        <div class="switch-pokemon-list" id="switch-pokemon-list">
            <!-- Pokemon options will be inserted here -->
        </div>
        <button class="btn-ds btn-gray" onclick="closeSwitchModal()" style="margin-top: 20px;">
            ANNULLA
        </button>
    </div>
    <script type="module" src="functions.js"></script>
</body>
</html>